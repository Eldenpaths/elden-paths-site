<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel - Elden Paths</title>
  <style>
    body { background: #111; color: #eee; font-family: sans-serif; text-align: center; padding: 2em; }
    input, select, button { margin: 0.5em; padding: 0.5em; font-size: 1em; }
  </style>
</head>
<body>
  <h1>Admin Panel</h1>

  <div>
    <label for="player">Player:</label>
    <input id="player" type="text" value="example_player">
  </div>

  <div>
    <label for="tile">Tile (x_y):</label>
    <input id="tile" type="text" value="15_22">
  </div>

  <div>
    <button onclick="movePlayer()">Move Player</button>
    <button onclick="toggleFog()">Toggle Fog</button>
    <button onclick="viewTile()">View Tile Info</button>
  </div>

  <pre id="output" style="background:#222; padding:1em; margin-top:1em;"></pre>

  <script>
    async function fetchJSON(path) {
      const res = await fetch(path);
      return await res.json();
    }

    async function movePlayer() {
      const player = document.getElementById("player").value;
      const tile = document.getElementById("tile").value;
      let players = await fetchJSON("data/players.json");
      players[player].tile = tile;
      document.getElementById("output").textContent = `${player} moved to ${tile}. (You must save manually to persist.)`;
    }

    async function toggleFog() {
      const tile = document.getElementById("tile").value;
      let tileIndex = await fetchJSON("data/tile_index.json");
      tileIndex[tile].fog_cleared = !tileIndex[tile].fog_cleared;
      document.getElementById("output").textContent = `Fog for ${tile} is now ${tileIndex[tile].fog_cleared ? 'cleared' : 'hidden'}. (You must save manually to persist.)`;
    }

    async function viewTile() {
      const tile = document.getElementById("tile").value;
      let tileIndex = await fetchJSON("data/tile_index.json");
      document.getElementById("output").textContent = JSON.stringify(tileIndex[tile], null, 2);
    }
  </script>
</body>
</html>
