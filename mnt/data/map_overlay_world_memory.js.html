
<script>
  async function loadWorldMemoryOverlay() {
    const res = await fetch('/mnt/data/world_memory.json');
    const data = await res.json();
    const tiles = data.tiles || {};

    // Bind hover behavior to tiles (assuming tiles have IDs like 'tile_x_y')
    Object.keys(tiles).forEach(tileId => {
      const el = document.getElementById(tileId);
      if (!el) return;

      const memory = tiles[tileId];
      const summary = [
        memory.terrain_origin ? `Origin: ${memory.terrain_origin}` : '',
        memory.features ? `Features: ${memory.features.join(', ')}` : '',
        memory.history ? `History: ${memory.history}` : ''
      ].filter(Boolean).join('<br>');

      el.addEventListener('mouseenter', () => {
        const tip = document.createElement('div');
        tip.className = 'memory-tooltip';
        tip.innerHTML = summary;
        document.body.appendChild(tip);
        const rect = el.getBoundingClientRect();
        tip.style.left = rect.left + 'px';
        tip.style.top = (rect.top - 40) + 'px';
      });

      el.addEventListener('mouseleave', () => {
        const tip = document.querySelector('.memory-tooltip');
        if (tip) tip.remove();
      });
    });
  }

  window.addEventListener('DOMContentLoaded', loadWorldMemoryOverlay);
</script>
<style>
  .memory-tooltip {
    position: absolute;
    background: #fff8dc;
    border: 1px solid #a08866;
    padding: 6px 10px;
    font-size: 0.85rem;
    box-shadow: 1px 1px 4px rgba(0,0,0,0.2);
    z-index: 999;
    max-width: 240px;
    pointer-events: none;
  }
</style>
