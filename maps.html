<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Elden Paths â€“ World Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <style>
    html, body, #map { margin: 0; height: 100%; width: 100%; background: #000; }
    .marker-shrine {
      background-color: gold;
      border-radius: 50%;
      width: 12px;
      height: 12px;
      border: 1px solid #444;
    }
  </style>
</head>
<body>
<div id="map"></div>
<script>
  const map = L.map('map', {
    minZoom: 1,
    maxZoom: 3,
    crs: L.CRS.Simple
  }).setView([0, 0], 1);

  const bounds = [[0,0], [1024*3, 1024*3]];
  const tileLayer = L.tileLayer('./map_tiles/z1/{x}_{y}.png', {
    tileSize: 1024,
    noWrap: true,
    bounds: bounds,
    errorTileUrl: ''
  }).addTo(map);

  // Sample shrine marker
  fetch("./data/tile_markers.json")
    .then(res => res.json())
    .then(data => {
      for (const tile in data) {
        for (const marker of data[tile]) {
          if (marker.type === "shrine") {
            const [x, y] = tile.split("_").map(Number);
            const px = x * 1024 + 512;
            const py = y * 1024 + 512;
            const icon = L.divIcon({ className: 'marker-shrine' });
            L.marker([py, px], { icon }).addTo(map).bindPopup(marker.name || "Shrine");
          }
        }
      }
    });
</script>
</body>
</html>
