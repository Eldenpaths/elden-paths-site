<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Elden Paths‚Ñ¢ ‚Äî Begin Your Journey</title>
  <link id="themeStylesheet" rel="stylesheet" href="style.css" />
  <script defer src="theme-toggle.js"></script>
  <script defer src="weather-router.js"></script>
  <script defer src="sketch-context.js"></script>
  <script defer src="auto-sketch.js"></script>
  <script defer src="sketch-log.js"></script>
  <script defer src="npc-sketch.js"></script>
  <script defer src="world-sketch.js"></script>
</head>
<body>
  <div class="container">
    <div style="text-align:right; margin-bottom: 1em;">
      <label for="themeSelect">üé® Theme:</label>
      <select id="themeSelect">
        <option value="default">Parchment</option>
        <option value="dark">Dark Mode</option>
        <option value="frazetta">Frazetta Mode</option>
        <option value="snow">Winter Fog</option>
        <option value="fog">Fog</option>
        <option value="rain">Rain</option>
        <option value="heat">Heat</option>
        <option value="glow">Glow</option>
      </select>
    </div>

    <h1>üéÆ Elden Paths‚Ñ¢ ‚Äî Player Console</h1>
    <p>Explore, act, or interact using the commands below.</p>

    <input type="text" id="playerCommand" placeholder="Type your action..." style="width:100%; padding:1em;"/>
    <button onclick="submitAction()">Submit</button>

    <div id="gameLog" style="margin-top:2em;"></div>

    <script>
      function submitAction() {
        const input = document.getElementById("playerCommand");
        const log = document.getElementById("gameLog");
        const text = input.value.trim().toLowerCase();

        if (!text) return;

        const entry = document.createElement("div");
        entry.textContent = `> ${text}`;
        log.prepend(entry);

        // Terrain or weather-based sketch prompt
        if (text === "look around" || text === "ms") {
          const sketch = window.getSketchPromptModifier?.() || "";
          const region = window.regionName || "Unknown region";
          const prompt = `A view of the land in ${region}, surrounded by ${sketch}.`;

          const sketchEntry = document.createElement("div");
          sketchEntry.textContent = `üñºÔ∏è Sketch Prompt: ${prompt}`;
          log.prepend(sketchEntry);

          window.generatedSketchPrompt = prompt;
        }

        // Generate NPC portrait
        if (text.startsWith("meet ")) {
          const npcName = text.replace("meet ", "").trim();
          if (npcName) {
            generateNpcPortrait(npcName);
          }
        }

        // Generate world structure sketch
        if (text.startsWith("build ")) {
          const name = text.replace("build ", "").trim();
          generateWorldSketch("structure", name, { details: "player-constructed, early phase" });
        }

        // Generate relic sketch
        if (text.startsWith("found ")) {
          const name = text.replace("found ", "").trim();
          generateWorldSketch("relic", name, { details: "mystical, glowing, half-buried" });
        }

        // Generate scene sketch
        if (text.startsWith("scene ")) {
          const name = text.replace("scene ", "").trim();
          generateWorldSketch("scene", name, { details: "dramatic lighting, intense moment" });
        }

        // Generate terrain sketch
        if (text.startsWith("terrain ")) {
          const name = text.replace("terrain ", "").trim();
          generateWorldSketch("terrain", name);
        }

        input.value = "";
      }
    </script>
  </div>
</body>
</html>
