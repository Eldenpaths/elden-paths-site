<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Elden Paths – Play</title>
  <style>
    body { background: #111; color: #eee; font-family: sans-serif; padding: 2em; text-align: center; }
    #sketch { margin-top: 1em; max-width: 90%; border: 2px solid #444; }
  </style>
</head>
<body>
  <h1>Elden Paths – Play</h1>
  <div id="status">Loading player data...</div>
  <img id="sketch" style="display:none;" />

  <script>
    const playerName = "example_player";  // Static player for now
    let playerData, tileMarkers;

    async function fetchJSON(path) {
      const res = await fetch(path);
      return await res.json();
    }

    async function loadGame() {
      const players = await fetchJSON("data/players.json");
      const tileIndex = await fetchJSON("data/tile_index.json");
      tileMarkers = await fetchJSON("data/tile_markers.json");

      playerData = players[playerName];
      const tile = playerData.tile;
      const fogged = !tileIndex[tile]?.fog_cleared;
      document.getElementById("status").textContent = `You are at tile ${tile} (${fogged ? "shrouded in fog" : "visible"}).`;

      // Check for sketch trigger
      if (tileMarkers[tile]) {
        const triggered = tileMarkers[tile].some(marker => marker.sketch_trigger);
        if (triggered) {
          const sketchImg = document.getElementById("sketch");
          sketchImg.src = `sketches/${tile}.png`; // Placeholder path
          sketchImg.alt = `Sketch for tile ${tile}`;
          sketchImg.style.display = "block";
        }
      }
    }

    loadGame();
  </script>
</body>
</html>
